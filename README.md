# ğŸš«Team Nulls
![í”„ë¡œì íŠ¸ ì‚¬ì§„](img/traders.png)
* * *

## ëª©ì°¨
- [ğŸš«Team Nulls](#team-nulls)
  - [ëª©ì°¨](#ëª©ì°¨)
  - [1.ğŸ‘¥ íŒ€ì› ì†Œê°œ](#1-íŒ€ì›-ì†Œê°œ)
  - [2. ğŸ›¹í”„ë¡œì íŠ¸ ê°œìš”](#2-í”„ë¡œì íŠ¸-ê°œìš”)
    - [2.1. ğŸˆí”„ë¡œì íŠ¸ ì†Œê°œ](#21-í”„ë¡œì íŠ¸-ì†Œê°œ)
    - [2.2. â•í”„ë¡œì íŠ¸ í•„ìš”ì„±](#22-í”„ë¡œì íŠ¸-í•„ìš”ì„±)
    - [2.3 ğŸ¤²í”„ë¡œì íŠ¸ ì˜ˆìƒ ì‚¬ìš©ì](#23-í”„ë¡œì íŠ¸-ì˜ˆìƒ-ì‚¬ìš©ì)
    - [2.4 ğŸí”„ë¡œì íŠ¸ ëª©í‘œ](#24-í”„ë¡œì íŠ¸-ëª©í‘œ)
    - [2.5 ğŸ€í”„ë¡œì íŠ¸ ì‹œë‚˜ë¦¬ì˜¤](#25-í”„ë¡œì íŠ¸-ì‹œë‚˜ë¦¬ì˜¤)
  - [3. ğŸš™ê¸°ìˆ ìŠ¤íƒ](#3-ê¸°ìˆ ìŠ¤íƒ)
  - [4. ğŸ»ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ](#4-ìš”êµ¬ì‚¬í•­-ëª…ì„¸ì„œ)
  - [5. ğŸ§í…Œì´ë¸” ëª…ì„¸ì„œ](#5-í…Œì´ë¸”-ëª…ì„¸ì„œ)
  - [6. ğŸ£ERD](#6-erd)
  - [7. ğŸƒSQL](#7-sql)
    - [7.1 ğŸ“DDL](#71-ddl)
    - [7.2 ğŸˆDML](#72-dml)
    - [7.3 ğŸTest Case](#73-test-case)
  - [8. ğŸ‰í›„ê¸°.](#8-í›„ê¸°)
        - [ë¯¼ì •ê¸°](#ë¯¼ì •ê¸°)
        - [ê¹€ì˜ˆì§€](#ê¹€ì˜ˆì§€)
        - [ê¹€ì •ìˆ˜](#ê¹€ì •ìˆ˜)
        - [ë°©ì§€í˜](#ë°©ì§€í˜)
        - [ì´ìŠ¬ì´](#ì´ìŠ¬ì´)
        - [í˜„ì¬ì§„](#í˜„ì¬ì§„)
 

## 1.ğŸ‘¥ íŒ€ì› ì†Œê°œ
| ë¯¼ì •ê¸° (íŒ€ì¥, ì±—ë´‡) | ê¹€ì˜ˆì§€ (ëŒ€ì¶œ) | ê¹€ì •ìˆ˜(ìœ ì €,ê´€ë¦¬ì) | ë°©ì§€í˜(ì£¼ì‹ ê±°ë˜) | ì´ìŠ¬ì´(ìœ ì €,ê´€ë¦¬ì) | í˜„ì¬ì§„(ê²Œì‹œë¬¼) |
| --- | --- | --- | --- | --- | --- |
|<img src="img/ëš±ì´.jpeg" width="100">|<img src="img/ì§‘ê²Œì‚¬ì¥.jpeg" width="100">|<img src="img/ì§•ì§•ì´.jpeg" width="100">|<img src="img/í”Œë‘í¬í†¤.jpg" width="100">|<img src="img/ìŠ¤í°ì§€ë°¥.jpg" width="100">|<img src="img/í•‘í•‘ì´.webp" width="100">|

* * *

## 2. ğŸ›¹í”„ë¡œì íŠ¸ ê°œìš”
* * *
### 2.1. ğŸˆí”„ë¡œì íŠ¸ ì†Œê°œ
2030 ì„¸ëŒ€ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê°œì¸ íˆ¬ììê°€ ë¹ ë¥´ê²Œ ì¦ê°€í•˜ë©´ì„œ[[1]](https://www.hankyung.com/article/2025111668521), ìœ íŠœë¸ŒÂ·ì»¤ë®¤ë‹ˆí‹°Â·SNS ê¸°ë°˜ì˜ ì •ë³´ ì†Œë¹„ê°€ ì£¼ì‹ ê±°ë˜ì— ì§ì ‘ì ì¸ ì˜í–¥ì„ ë¯¸ì¹˜ê³  ìˆë‹¤.[[2]](https://www.jibs.co.kr/news/articles/articlesDetail/39630?feed=da&kakao_from=mainnews)[[3] ](https://www.kcmi.re.kr/report/report_view?report_no=1235)ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ì •ë³´ëŠ” ì‹ ë¢°ë„ì™€ ë§¥ë½ ë“± í™•ì‹¤í•œ ì •ë³´ë¼ê³  íŒŒì•…í•˜ê¸° í˜ë“¤ì–´ì„œ ê°œì¸ íˆ¬ììë“¤ì€ ì´ëŸ¬í•œ ì •ë³´ë¥¼ ë³´ê³  ì œëŒ€ë¡œëœ íŒë‹¨ì„ ë‚´ë¦¬ê¸° í˜ë“¤ê³  ì´ë¡œ ì¸í•´ ì¶©ë™ì ì¸ ë§¤ë§¤ë¡œ ì´ì–´ì§ˆìˆ˜ê°€ ìˆë‹¤.
* * *
### 2.2. â•í”„ë¡œì íŠ¸ í•„ìš”ì„±
ë³¸ ì„œë¹„ìŠ¤ëŠ” ë‹¨ìˆœí•œ ì£¼ì‹ ê±°ë˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ê²ƒì„ ë„˜ì–´, íˆ¬ììì˜ ê±°ë˜ ì´ë ¥ê³¼ í–‰ë™ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ì •ë³´ ì œê³µ, ì‚¬ìš©ì ê°„ ì˜ê²¬ êµí™˜ ë° ì •ë³´ êµí™˜ì´ ê°€ëŠ¥í•œ ì»¤ë®¤ë‹ˆí‹°, AI ì±—ë´‡ì„ í†µí•œ íˆ¬ì ì •ë³´ ìš”ì•½ ë° ì˜ì‚¬ ê²°ì • ë³´ì¡° ê·¸ë¦¬ê³  íˆ¬ì ì—¬ë ¥ì„ ê³ ë ¤í•œ ëŒ€ì¶œ, ìê¸ˆ ê´€ë¦¬ ê¸°ëŠ¥ì„ í†µí•©í•œ ê°œì¸ íˆ¬ìì ì¤‘ì‹¬ì˜ ì£¼ì‹ ê±°ë˜ í”Œë«í¼ì„ ëª©í‘œë¡œ í•œë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ìëŠ” ë‹¨ìˆœí•œ ë§¤ë§¤ê°€ ì•„ë‹Œ ì´í•´ ê¸°ë°˜ì˜ íˆ¬ì ê²½í—˜ì„ í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
* * *
### 2.3 ğŸ¤²í”„ë¡œì íŠ¸ ì˜ˆìƒ ì‚¬ìš©ì
- ì‚¬ìš©ì A, 20ëŒ€ í›„ë°˜, ì§ì¥ì¸: ì£¼ë³€ì—ì„œ ë‹¤ë“¤ ì¬í…Œí¬ë¡œ ì¸í•´ ì£¼ì‹íˆ¬ìë¥¼ í•˜ê¸° ì‹œì‘í•˜ë©´ì„œ, ìì‹ ë„ ë’¤ì³ì§ˆ ìƒê°ì´ ë‘ë ¤ì›Œ ì£¼ì‹íˆ¬ìë¥¼ í•˜ê¸° ì‹œì‘í•œë‹¤. ì£¼ì‹íˆ¬ìê°€ ì´ë²ˆì´ ì²˜ìŒì´ê³  ì–´ë–»ê²Œ í•´ì•¼í• ì§€ ëª¨ë¥´ëŠ” ìƒí™©ì´ë¼ ë¶ˆì•ˆí•˜ê¸°ë§Œ í•˜ë‹¤. í•˜ì§€ë§Œ ì´ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬, ë‹¤ë¥¸ì‚¬ëŒë“¤ì˜ ë§¤ìˆ˜ í˜„í™© ë§¤ë„ í˜„í™©ì„ ë³´ê³  ì˜ê²¬ì„ ë“¤ìœ¼ë©° ê²¬í•´ë¥¼ ëŠ˜ë¦¬ë©° ì£¼ì‹ì„ ë§¤ìˆ˜ ë˜ëŠ” ë§¤ë„ í•  ìì‹ ì´ ìƒê¸´ë‹¤.
- ì‚¬ìš©ì B, 30ëŒ€ ì¤‘ë°˜, ì£¼ë¶€: ìš°ì—°íˆ ìœ íŠœë¸Œ ì•Œê³ ë¦¬ì¦˜ì— ì£¼ì‹ì— ëŒ€í•œ ì˜ìƒì´ ë‚˜íƒ€ë‚˜ë©´ì„œ, ì£¼ì‹ì— ëŒ€í•œ ì •ë³´ë¥¼ ì–»ê²Œ ëœë‹¤. í•˜ì§€ë§Œ Bì”¨ëŠ” ìœ íŠœë¸Œ ì˜ìƒì˜ ì •ë³´ê°€ ì œëŒ€ë¡œ ëœ ì •ë³´ì¸ì§€ í™•ì‹¤ì¹˜ ì•Šì•˜ë‹¤. í•˜ì§€ë§Œ ì–´í”Œ ë‚´ì˜ ì±—ë´‡ì„ í†µí•˜ì—¬ ì •ë³´ì— ëŒ€í•œ ì¶œì²˜ë¥¼ ëª…í™•íˆ ì•Œê²Œ ë˜ì—ˆê³  ì–´ë– í•œ ì •ë³´ë¥¼ í™•ì‹ í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì•Œê²Œ ë¨ìœ¼ë¡œì¨, ì£¼ì‹ì— ëŒ€í•´ ë§¤ìˆ˜ ë§¤ë„ì— ëŒ€í•œ ìì‹ ì˜ í–‰ë™ì— ìì‹ ê°ì„ ê°€ì§€ê²Œ ëœë‹¤.
* * *
### 2.4 ğŸí”„ë¡œì íŠ¸ ëª©í‘œ
ë³¸ ì„œë¹„ìŠ¤ì˜ ëª©í‘œëŠ” ì£¼ì‹ ê±°ë˜ë¥¼ í•˜ë©° ì£¼ì‹ ê±°ë˜ì‹œ ê²€ì¦ë˜ì§€ ì•Šì€ ë‰´ìŠ¤ì™€ ì •ë³´ë¡œ ì¸í•œ ì˜ëª»ëœ ì˜ì‚¬ê²°ì •ì„ ë°©ì§€í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
ì‚¬ìš©ìëŠ” ë‹¤ì–‘í•œ íˆ¬ììë“¤ê³¼ì˜ ì˜ê²¬ êµë¥˜ë¥¼ í†µí•´ ì •ë³´ì˜ ì‹ ë¢°ì„±ì„ ê²€ì¦í•  ìˆ˜ ìˆìœ¼ë©°, AI ì±—ë´‡ì„ í™œìš©í•´ ë‰´ìŠ¤ ìš”ì•½, ì‚¬ì‹¤ í™•ì¸, ì¢…ëª© ê´€ë ¨ ì •ë³´ë¥¼ ì œê³µë°›ì•„ ë³´ë‹¤ í•©ë¦¬ì ì¸ íŒë‹¨ì„ ê¸°ë°˜ìœ¼ë¡œ ì£¼ì‹ ê±°ë˜ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.
* * *

### 2.5 ğŸ€í”„ë¡œì íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
[<img src="img/Scenario.png"/>](https://drive.google.com/file/d/1IZ-oC9UUSV5uRwYueSXk2hN4eeeuUTG0/view)

* * *

## 3. ğŸš™ê¸°ìˆ ìŠ¤íƒ
<img src="https://img.shields.io/badge/Linux-FCC624?style=for-the-badge&logo=linux&logoColor=black" alt="Linux">
<img src="https://img.shields.io/badge/MariaDB-003545?style=for-the-badge&logo=mariadb&logoColor=white" alt="MariaDB">
<img src="https://img.shields.io/badge/ERDCloud-2C2C2C?style=for-the-badge" alt="ERDCloud">



* * *
## 4. ğŸ»ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ
<img src="img/img_excel/ìš”êµ¬ì‚¬í•­ëª…ì„¸ì„œ1.png" /> <img src="img/img_excel/ìš”êµ¬ì‚¬í•­ëª…ì„¸ì„œ2.png" /><img src="img/img_excel/ìš”êµ¬ì‚¬í•­ëª…ì„¸ì„œ3.png" /><img src="img/img_excel/ìš”êµ¬ì‚¬í•­ëª…ì„¸ì„œ4.png" />
* * *
## 5. ğŸ§í…Œì´ë¸” ëª…ì„¸ì„œ
<img src="img/img_excel/1_í…Œì´ë¸” ëª…ì„¸ì„œ.png" /><img src="img/img_excel/4_í…Œì´ë¸” ëª…ì„¸ì„œ.png" /><img src="img/img_excel/6_í…Œì´ë¸” ëª…ì„¸ì„œ.png" /><img src="img/img_excel/7_í…Œì´ë¸” ëª…ì„¸ì„œ.png" /><img src="img/img_excel/8_í…Œì´ë¸” ëª…ì„¸ì„œ.png" /><img src="img/img_excel/9_í…Œì´ë¸” ëª…ì„¸ì„œ.png" /><img src="img/img_excel/11_í…Œì´ë¸” ëª…ì„¸ì„œ.png" />

* * *

## 6. ğŸ£ERD

[<img src="img/ERD.png" />](https://www.erdcloud.com/d/85rc3G9JSsJkdZcZD)

* * *

## 7. ğŸƒSQL
* * *
### 7.1 ğŸ“DDL

<details>
<summary>User</summary>
<div markdown="1">

```
CREATE TABLE `users` (
  `user_no` INT AUTO_INCREMENT NOT NULL COMMENT 'ì‚¬ìš©ìê³ ìœ ë²ˆí˜¸',
  `user_name` VARCHAR(15) NOT NULL COMMENT 'ì´ë¦„',
  `user_mobile` CHAR(11) NOT NULL COMMENT 'íœ´ëŒ€ì „í™”',
  `user_email` VARCHAR(255) NOT NULL COMMENT 'ì´ë©”ì¼',
  `user_credit` INT NOT NULL COMMENT 'ì‹ ìš©ë“±ê¸‰',
  `user_status` CHAR(2) NOT NULL COMMENT 'ìƒíƒœ',
  `user_created` DATETIME NOT NULL DEFAULT NOW() COMMENT 'ê°€ì…ì¼ì‹œ',

  CONSTRAINT PRIMARY KEY (user_no),
  CONSTRAINT uq_user_mobile UNIQUE (user_mobile),
  CONSTRAINT uq_user_email UNIQUE (user_email),
  CONSTRAINT chk_user_credit CHECK (`user_credit` BETWEEN 0 AND 10),
  CONSTRAINT chk_user_status CHECK (`user_status` IN ('ì •ìƒ', 'íƒˆí‡´'))
);
```

</div>
</details>

<details>
<summary>Admin</summary>
<div markdown="1">

```
CREATE TABLE admins (
    admin_no INT NOT NULL AUTO_INCREMENT,
    admin_id VARCHAR(20) NOT NULL UNIQUE,
    admin_email VARCHAR(100) NOT NULL UNIQUE,
    is_system_admin BOOL NOT NULL DEFAULT FALSE,
    is_community_admin BOOL NOT NULL DEFAULT FALSE,
    created_at DATETIME NOT NULL DEFAULT NOW(),
    updated_at DATETIME,

    PRIMARY KEY (admin_no)
);
```

</div>
</details>

<details>
<summary>Stock</summary>
<div markdown="1">

```
CREATE TABLE stocks (
    stock_code VARCHAR(10) PRIMARY KEY COMMENT 'ì¢…ëª© ì½”ë“œ',
    stock_name VARCHAR(30) NOT NULL COMMENT 'ì¢…ëª© ì´ë¦„',
    market_type VARCHAR(10) NOT NULL COMMENT 'ì‹œì¥ êµ¬ë¶„',
    listed_shares BIGINT COMMENT 'ìƒì¥ ì£¼ì‹ìˆ˜',
    created_at TIMESTAMP NOT NULL COMMENT 'ë“±ë¡ì¼ì‹œ',
    is_active BOOL NOT NULL DEFAULT TRUE COMMENT 'ê±°ë˜ ê°€ëŠ¥ ì—¬ë¶€'
) COMMENT='ì£¼ì‹ ì¢…ëª©';
```

</div>
</details>

<details>
<summary>Account</summary>
<div markdown="1">

```
CREATE TABLE accounts (
    account_id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    user_no INT NOT NULL REFERENCES users(user_no),
    account_number VARCHAR(20) NOT NULL,
    account_name VARCHAR(20) NOT NULL,
    deposit BIGINT NOT NULL DEFAULT 0,
    margin BIGINT NOT NULL DEFAULT 0,
    `status` VARCHAR(10) NOT NULL DEFAULT 'ì •ìƒ',
    last_transaction_at TIMESTAMP NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT chk_accounts_deposit CHECK (deposit >= 0),
    CONSTRAINT chk_accounts_margin CHECK (margin >= 0),
    CONSTRAINT chk_accounts_status CHECK (status IN ('ì •ìƒ', 'ì •ì§€', 'íœ´ë©´', 'í•´ì§€'))
);
```

</div>
</details>

<details>
<summary>Dashboard</summary>
<div markdown="1">

```
CREATE TABLE dashboard (
    dash_no INT NOT NULL AUTO_INCREMENT,
    created_at DATETIME NOT NULL DEFAULT NOW(),
    total_user_count INT NOT NULL CHECK (total_user_count >= 0),
    register_count INT NOT NULL CHECK (register_count >= 0),
    login_count INT NOT NULL CHECK (login_count >= 0),

    PRIMARY KEY (dash_no)
);
```

</div>
</details>

<details>
<summary>Chat Bot</summary>
<div markdown="1">

```
CREATE TABLE `Chatbot` (
    `conversation_id` INT NOT NULL AUTO_INCREMENT COMMENT 'ëŒ€í™” ID',
    `user_id` VARCHAR(10) NOT NULL COMMENT 'ì‚¬ìš©ì',
    `message` TEXT NOT NULL COMMENT 'ë©”ì‹œì§€',
    `role` ENUM('USER', 'BOT') NOT NULL DEFAULT 'BOT' COMMENT 'ë°œí™”ì£¼ì²´',

    CONSTRAINT PRIMARY KEY (`conversation_id`),
    CONSTRAINT `fk_chatbot_user` FOREIGN KEY (`user_id`) REFERENCES `login`(`user_id`) 
) COMMENT='ì±—ë´‡ ëŒ€í™” í…Œì´ë¸”';
```

</div>
</details>

<details>
<summary>Loan Policy</summary>
<div markdown="1">

```
CREATE TABLE loan_policy (
    policy_id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    loan_type VARCHAR(20) NOT NULL,
    credit_grade_min INT NOT NULL,
    credit_grade_max INT NOT NULL,
    interest_rate DECIMAL(5,2) NULL,
    max_amount BIGINT NULL,

    CONSTRAINT chk_policy_loan_type CHECK (loan_type IN ('ì‹ ìš©')),
    CONSTRAINT chk_policy_credit_min CHECK (credit_grade_min BETWEEN 1 AND 10),
    CONSTRAINT chk_policy_credit_max CHECK (credit_grade_max BETWEEN 1 AND 10),
    CONSTRAINT chk_policy_credit_range CHECK (credit_grade_min <= credit_grade_max),
    CONSTRAINT chk_policy_interest_rate CHECK (interest_rate BETWEEN 0 AND 20.00),
    CONSTRAINT chk_policy_max_amount CHECK (max_amount IS NULL OR max_amount > 0)
);
```

</div>
</details>

<details>
<summary>Login</summary>
<div markdown="1">

```
CREATE TABLE `login` (
	`user_id`           VARCHAR(10) NOT NULL				   COMMENT 'ID',
	`user_no`           INT NOT NULL							   COMMENT 'ì‚¬ìš©ìê³ ìœ ë²ˆí˜¸',
	`user_pw`           VARCHAR(255) NOT NULL				   COMMENT 'IDë¹„ë°€ë²ˆí˜¸í•´ì‹œ',
	`user_pin`          VARCHAR(255) NULL					   COMMENT 'ê°„í¸ë¹„ë°€ë²ˆí˜¸í•´ì‹œ',
	`user_recent`       DATETIME NOT NULL DEFAULT NOW()   COMMENT 'ìµœì¢…ë¡œê·¸ì¸ì¼ì‹œ',

	CONSTRAINT PRIMARY KEY (user_id),
	CONSTRAINT fk_login_user_no FOREIGN KEY (user_no) REFERENCES `users`(`user_no`)
);
```

</div>
</details>

<details>
<summary>Accounts</summary>
<div markdown="1">

```
CREATE TABLE accounts (
    account_id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    user_no INT NOT NULL REFERENCES users(user_no),
    account_number VARCHAR(20) NOT NULL,
    account_name VARCHAR(20) NOT NULL,
    deposit BIGINT NOT NULL DEFAULT 0,
    margin BIGINT NOT NULL DEFAULT 0,
    `status` VARCHAR(10) NOT NULL DEFAULT 'ì •ìƒ',
    last_transaction_at TIMESTAMP NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT chk_accounts_deposit CHECK (deposit >= 0),
    CONSTRAINT chk_accounts_margin CHECK (margin >= 0),
    CONSTRAINT chk_accounts_status CHECK (status IN ('ì •ìƒ', 'ì •ì§€', 'íœ´ë©´', 'í•´ì§€'))
);

```

</div>
</details>

<details>
<summary>Accounts</summary>
<div markdown="1">

```
CREATE TABLE accounts (
    account_id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    user_no INT NOT NULL REFERENCES users(user_no),
    account_number VARCHAR(20) NOT NULL,
    account_name VARCHAR(20) NOT NULL,
    deposit BIGINT NOT NULL DEFAULT 0,
    margin BIGINT NOT NULL DEFAULT 0,
    `status` VARCHAR(10) NOT NULL DEFAULT 'ì •ìƒ',
    last_transaction_at TIMESTAMP NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT chk_accounts_deposit CHECK (deposit >= 0),
    CONSTRAINT chk_accounts_margin CHECK (margin >= 0),
    CONSTRAINT chk_accounts_status CHECK (status IN ('ì •ìƒ', 'ì •ì§€', 'íœ´ë©´', 'í•´ì§€'))
);

```

</div>
</details>

<details>
<summary>Posts</summary>
<div markdown="1">

```
CREATE TABLE posts (
    post_id INT NOT NULL AUTO_INCREMENT,
    user_no INT NOT NULL,
    title VARCHAR(100) NOT NULL,
    content TEXT NOT NULL,
    is_admin_post VARCHAR(40) NOT NULL CHECK (is_admin_post IN ('admin', 'user')),
    post_like INT NOT NULL DEFAULT 0 CHECK (post_like >= 0),
    post_dislike INT NOT NULL DEFAULT 0 CHECK (post_dislike >= 0),
    post_del BOOLEAN NOT NULL DEFAULT FALSE,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    PRIMARY KEY (post_id),
    CONSTRAINT fk_posts_user
        FOREIGN KEY (user_no) REFERENCES users(user_no)
);

```

</div>
</details>

<details>
<summary>Notification</summary>
<div markdown="1">

```
CREATE TABLE notification (
    notification_id INT NOT NULL AUTO_INCREMENT,
    notification_type VARCHAR(30) NOT NULL CHECK (notification_type IN ('POST', 'COMMENT')),
    message TEXT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,

    PRIMARY KEY (notification_id)
);

```

</div>
</details>

<details>
<summary>News</summary>
<div markdown="1">

```
CREATE TABLE `News` (
    `News_id` INT NOT NULL AUTO_INCREMENT COMMENT 'ë‰´ìŠ¤ ID',
    `Title` VARCHAR(100) NOT NULL COMMENT 'ì œëª©',
    `Content` TEXT NOT NULL COMMENT 'ë‚´ìš©',
    `Publisher` VARCHAR(20) NOT NULL COMMENT 'ì–¸ë¡ ì‚¬',
    `URL` VARCHAR(255) NOT NULL COMMENT 'URL',
    `Published_at` DATE NOT NULL DEFAULT (CURRENT_DATE) COMMENT 'ë°œí–‰ë‚ ì§œ',
    `Hash` VARCHAR(64) NOT NULL COMMENT 'í•´ì‹œê°’ (ì¤‘ë³µë°©ì§€)',
    `stock_code` VARCHAR(10) NOT NULL COMMENT 'ì£¼ì‹ì½”ë“œ',

    CONSTRAINT PRIMARY KEY (`News_id`),
    CONSTRAINT `uq_news_url` UNIQUE (`URL`),
    CONSTRAINT `fk_news_stock` FOREIGN KEY (`stock_code`) REFERENCES `stocks`(`stock_code`)
) COMMENT='ë‰´ìŠ¤';

```

</div>
</details>

<details>
<summary>Stock Price</summary>
<div markdown="1">

```
CREATE TABLE stock_price (
    price_id INT PRIMARY KEY AUTO_INCREMENT COMMENT 'ê°€ê²© ID',
    stock_code VARCHAR(10) NOT NULL COMMENT 'ì¢…ëª© ì½”ë“œ',
    current_price DECIMAL(15,2) NOT NULL COMMENT 'í˜„ì¬ê°€',
    prev_close DECIMAL(15,2) NOT NULL COMMENT 'ì „ì¼ ì¢…ê°€',
    change_amount DECIMAL(15,2) COMMENT 'ì „ì¼ëŒ€ë¹„ ê¸ˆì•¡',
    change_rate DECIMAL(5,2) COMMENT 'ì „ì¼ëŒ€ë¹„ ë“±ë½ë¥ ',
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìˆ˜ì •ì¼ì‹œ',
        
    FOREIGN KEY (stock_code) REFERENCES stocks(stock_code),
    CHECK (current_price > 0),
    CHECK (prev_close > 0)
) COMMENT='ì£¼ì‹ ì¢…ëª© ê°€ê²©';

```

</div>
</details>

<details>
<summary>Loan</summary>
<div markdown="1">

```
CREATE TABLE loan (
    loan_id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    user_no INT NOT NULL REFERENCES users(user_no),
    account_id BIGINT NOT NULL REFERENCES accounts(account_id),
    loan_type VARCHAR(20) NOT NULL,
    principal BIGINT NOT NULL,
    balance BIGINT NOT NULL,
    interest_rate DECIMAL(5,2) NOT NULL,
    loan_period_months INT NOT NULL,
    repayment_type VARCHAR(20) NOT NULL,
    monthly_repayment BIGINT NULL,
    `status` VARCHAR(10) NOT NULL DEFAULT 'ìŠ¹ì¸',
    executed_at TIMESTAMP NULL DEFAULT NULL,
    maturity_date DATE NULL DEFAULT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT chk_loan_type CHECK (loan_type IN ('ì‹ ìš©')),
    CONSTRAINT chk_loan_principal CHECK (principal > 0),
    CONSTRAINT chk_loan_balance CHECK (balance >= 0 AND balance <= principal),
    CONSTRAINT chk_loan_interest_rate CHECK (interest_rate BETWEEN 0 AND 20.00),
    CONSTRAINT chk_loan_period CHECK (loan_period_months > 0),
    CONSTRAINT chk_loan_repayment_type CHECK (repayment_type IN ('ë§Œê¸°ì¼ì‹œìƒí™˜', 'ì›ë¦¬ê¸ˆê· ë“±ë¶„í• ')),
    CONSTRAINT chk_loan_monthly_repayment CHECK (monthly_repayment IS NULL OR monthly_repayment >= 0),
    CONSTRAINT chk_loan_status CHECK (status IN ('ìŠ¹ì¸', 'ì‹¤í–‰ì¤‘', 'ì™„ë£Œ', 'ì—°ì²´'))
);

```

</div>
</details>

<details>
<summary>Loan Repayment Schedule</summary>
<div markdown="1">

```
CREATE TABLE loan_repayment_schedule (
    schedule_id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    loan_id BIGINT NOT NULL REFERENCES loan(loan_id),
    repayment_number INT NOT NULL,
    repayment_date DATE NOT NULL,
    principal_amount BIGINT NOT NULL,
    interest_amount BIGINT NOT NULL,
    total_amount BIGINT NOT NULL,
    `status` VARCHAR(10) NOT NULL DEFAULT 'ì˜ˆì •',
    actual_repayment_at TIMESTAMP NULL,
    
    CONSTRAINT chk_schedule_repayment_number CHECK (repayment_number > 0),
    CONSTRAINT chk_schedule_principal CHECK (principal_amount >= 0),
    CONSTRAINT chk_schedule_interest CHECK (interest_amount >= 0),
    CONSTRAINT chk_schedule_total CHECK (total_amount = principal_amount + interest_amount),
    CONSTRAINT chk_schedule_status CHECK (status IN ('ì˜ˆì •', 'ì™„ë£Œ'))
);
```

</div>
</details>

<details>
<summary>Admin Credentials</summary>
<div markdown="1">

```
CREATE TABLE admin_credentials (
    admin_no INT NOT NULL,
    password VARCHAR(255) NOT NULL,
    pw_changed_at DATETIME NOT NULL DEFAULT NOW(),

    PRIMARY KEY (admin_no),
    FOREIGN KEY (admin_no) REFERENCES admins(admin_no) 
        ON DELETE CASCADE
);
```

</div>
</details>

<details>
<summary>Admin Notification</summary>
<div markdown="1">

```
CREATE TABLE admin_notification (
    noti_no INT NOT NULL AUTO_INCREMENT,
    admin_no INT NOT NULL,
    noti_title TEXT NOT NULL,
    noti_text TEXT NOT NULL,
    is_alert BOOL NOT NULL DEFAULT FALSE,
    created_at DATETIME NOT NULL DEFAULT NOW(),

    PRIMARY KEY (noti_no),
    FOREIGN KEY (admin_no) REFERENCES admins(admin_no)
);

```

</div>
</details>

<details>
<summary>Admin Modification Log</summary>
<div markdown="1">

```
CREATE TABLE admin_modification_log (
    modi_no INT NOT NULL AUTO_INCREMENT,
    admin_no INT NOT NULL,
    user_no INT NOT NULL,
    modi_type VARCHAR(20) NOT NULL CHECK (modi_type IN ('ìˆ˜ì •', 'ì¡°íšŒ', 'ì‚­ì œ')),
    modified_at DATETIME NOT NULL,
    modi_detail TEXT NOT NULL,

    PRIMARY KEY (modi_no),
    FOREIGN KEY (admin_no) REFERENCES admins(admin_no),
    FOREIGN KEY (user_no) REFERENCES users(user_no) 
);
```

</div>
</details>

<details>
<summary>User Notification</summary>
<div markdown="1">

```
CREATE TABLE user_notification (
    notification_id INT NOT NULL,
    user_no INT NOT NULL,
    is_read BOOLEAN NOT NULL DEFAULT FALSE,
    read_at DATETIME NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    
    PRIMARY KEY (notification_id, user_no),
    CONSTRAINT fk_user_notification_notification
        FOREIGN KEY (notification_id) REFERENCES notification(notification_id)
        ON DELETE CASCADE,
    CONSTRAINT fk_user_notification_user
        FOREIGN KEY (user_no) REFERENCES users(user_no)
);
```

</div>
</details>

<details>
<summary>Comments</summary>
<div markdown="1">

```
CREATE TABLE comments (
    comment_id INT NOT NULL AUTO_INCREMENT,
    post_id INT NOT NULL,
    user_no INT NOT NULL,
    content TEXT NOT NULL,
    comment_like INT NOT NULL DEFAULT 0 CHECK (comment_like >= 0),
    comment_dislike INT NOT NULL DEFAULT 0 CHECK (comment_dislike >= 0),
    comment_del BOOLEAN NOT NULL DEFAULT FALSE,
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    PRIMARY KEY (comment_id),
    CONSTRAINT fk_comments_post
        FOREIGN KEY (post_id) REFERENCES posts(post_id)
        ON DELETE CASCADE,
    CONSTRAINT fk_comments_user
        FOREIGN KEY (user_no) REFERENCES users(user_no)
);
```

</div>
</details>

<details>
<summary>Deposit Withdraw History</summary>
<div markdown="1">

```
CREATE TABLE deposit_withdraw_history (
    transaction_id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    account_id BIGINT NOT NULL REFERENCES accounts(account_id),
    transaction_type VARCHAR(10) NOT NULL,
    amount BIGINT NOT NULL,
    balance_after BIGINT NOT NULL,
    transaction_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT chk_deposit_withdraw_type CHECK (transaction_type IN ('ì…ê¸ˆ', 'ì¶œê¸ˆ')),
    CONSTRAINT chk_deposit_withdraw_amount CHECK (amount > 0),
    CONSTRAINT chk_deposit_withdraw_balance CHECK (balance_after >= 0)
);

```

</div>
</details>

<details>
<summary>Loan Repayment History</summary>
<div markdown="1">

```
CREATE TABLE loan_repayment_history (
    repayment_id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    loan_id BIGINT NOT NULL REFERENCES loan(loan_id),
    schedule_id BIGINT NULL REFERENCES loan_repayment_schedule(schedule_id),
    repayment_type VARCHAR(20) NOT NULL,
    principal_amount BIGINT NOT NULL,
    interest_amount BIGINT NOT NULL,
    overdue_interest_amount BIGINT NOT NULL DEFAULT 0,
    total_amount BIGINT NOT NULL,
    balance_after BIGINT NOT NULL,
    repayment_method VARCHAR(10) NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    
    CONSTRAINT chk_repayment_type CHECK (repayment_type IN ('ì •ìƒ')),
    CONSTRAINT chk_repayment_principal CHECK (principal_amount >= 0),
    CONSTRAINT chk_repayment_interest CHECK (interest_amount >= 0),
    CONSTRAINT chk_repayment_overdue CHECK (overdue_interest_amount >= 0),
    CONSTRAINT chk_repayment_total CHECK (total_amount = principal_amount + interest_amount + overdue_interest_amount),
    CONSTRAINT chk_repayment_balance CHECK (balance_after >= 0),
    CONSTRAINT chk_repayment_method CHECK (repayment_method IN ('ìë™', 'ìˆ˜ë™'))
);
```

</div>
</details>

<details>
<summary>Trades</summary>
<div markdown="1">

```
CREATE TABLE trades (
    trade_id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ì²´ê²° ë²ˆí˜¸',
    user_no INT NOT NULL COMMENT 'ì‚¬ìš©ì ê³ ìœ ë²ˆí˜¸',
    stock_code VARCHAR(10) NOT NULL COMMENT 'ì¢…ëª© ì½”ë“œ',
    account_id BIGINT NOT NULL COMMENT 'ì¦ê¶Œê³„ì¢Œ ID',
    trade_type ENUM('BUY', 'SELL') NOT NULL COMMENT 'ê±°ë˜ ìœ í˜•',
    quantity INT NOT NULL COMMENT 'ìˆ˜ëŸ‰',
    price DECIMAL(15,2) NOT NULL COMMENT 'ì²´ê²° ê°€ê²©',
    total_amount DECIMAL(20,2) NOT NULL COMMENT 'ì²´ê²° ê¸ˆì•¡',
    trade_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ì²´ê²° ì‹œê°„',
    
    FOREIGN KEY (user_no) REFERENCES users(user_no),
    FOREIGN KEY (stock_code) REFERENCES stocks(stock_code),
    FOREIGN KEY (account_id) REFERENCES accounts(account_id),
    CHECK (quantity > 0),
    CHECK (price > 0),
    CHECK (total_amount > 0)
) COMMENT='ì£¼ì‹ ì²´ê²° ë‚´ì—­';
```

</div>
</details>

<details>
<summary>Portfolios</summary>
<div markdown="1">

```
CREATE TABLE portfolios (
    portfolio_id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'í¬íŠ¸í´ë¦¬ì˜¤ ID',
    user_no INT NOT NULL COMMENT 'ì‚¬ìš©ì ê³ ìœ ë²ˆí˜¸',
    stock_code VARCHAR(10) NOT NULL COMMENT 'ì¢…ëª© ì½”ë“œ',
    account_id BIGINT NOT NULL COMMENT 'ì¦ê¶Œê³„ì¢Œ ID',
    quantity INT NOT NULL COMMENT 'ë³´ìœ  ìˆ˜ëŸ‰',
    avg_price DECIMAL(15,2) NOT NULL COMMENT 'í‰ê·  ë§¤ì…ê°€',
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìµœì´ˆ ë§¤ìˆ˜ì¼',
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ìµœì¢… ê±°ë˜ì¼',
    
    FOREIGN KEY (user_no) REFERENCES users(user_no),
    FOREIGN KEY (stock_code) REFERENCES stocks(stock_code),
    FOREIGN KEY (account_id) REFERENCES accounts(account_id),
    UNIQUE KEY uk_account_stock (account_id, stock_code),
    CHECK (quantity > 0),
    CHECK (avg_price > 0)
) COMMENT='ì‚¬ìš©ì ë³´ìœ  ì¢…ëª©';
```

</div>
</details>

<details>
<summary>Watchlist</summary>
<div markdown="1">

```
CREATE TABLE watchlist (
    watchlist_id INT PRIMARY KEY AUTO_INCREMENT COMMENT 'ê´€ì‹¬ì¢…ëª© ID',
    user_no INT NOT NULL COMMENT 'ì‚¬ìš©ì ê³ ìœ ë²ˆí˜¸',
    stock_code VARCHAR(10) NOT NULL COMMENT 'ì¢…ëª© ì½”ë“œ',
    added_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ë“±ë¡ì¼ì‹œ',
    
    FOREIGN KEY (user_no) REFERENCES users(user_no),
    FOREIGN KEY (stock_code) REFERENCES stocks(stock_code),
    UNIQUE KEY uk_user_stock (user_no, stock_code)
) COMMENT='ì‚¬ìš©ì ê´€ì‹¬ì¢…ëª©';

```

</div>
</details>

<details>
<summary>Stock Summary</summary>
<div markdown="1">

```
CREATE TABLE `Stock_summary` (
    `stock_summary_id` INT NOT NULL AUTO_INCREMENT COMMENT 'ìš”ì•½ ID',
    `conversation_id` INT NOT NULL COMMENT 'ëŒ€í™” ID',
    `stock_code` VARCHAR(10) NOT NULL COMMENT 'ì¢…ëª© ì½”ë“œ',
    `summary` TEXT NOT NULL COMMENT 'ìš”ì•½ë‚´ìš©',

    CONSTRAINT PRIMARY KEY (`stock_summary_id`),
    CONSTRAINT `fk_stock_sum_conv` FOREIGN KEY (`conversation_id`) REFERENCES `Chatbot`(`conversation_id`),
    CONSTRAINT `fk_stock_sum_stock` FOREIGN KEY (`stock_code`) REFERENCES `stocks`(`stock_code`)
) COMMENT='ì£¼ì‹ ìš”ì•½';

```

</div>
</details>

<details>
<summary>News Summary</summary>
<div markdown="1">

```
CREATE TABLE `News_summary` (
    `news_summary_id` INT NOT NULL AUTO_INCREMENT COMMENT 'ë‰´ìŠ¤ ìš”ì•½ ID',
    `conversation_id` INT NOT NULL COMMENT 'ëŒ€í™” ID',
    `News_id` INT NOT NULL COMMENT 'ë‰´ìŠ¤ ID',
    `news_url` VARCHAR(255) NOT NULL COMMENT 'ë‰´ìŠ¤ URL',
    `summary` TEXT NOT NULL COMMENT 'ìš”ì•½',
    `sentiment` ENUM('POSITIVE', 'NEUTRAL', 'NEGATIVE') NOT NULL DEFAULT 'NEUTRAL' COMMENT 'ê°ì„±ë¶„ì„',

    CONSTRAINT PRIMARY KEY (`news_summary_id`),
    CONSTRAINT `fk_news_sum_conv` FOREIGN KEY (`conversation_id`) REFERENCES `Chatbot`(`conversation_id`),
    CONSTRAINT `fk_news_sum_news` FOREIGN KEY (`News_id`) REFERENCES `News`(`News_id`),
    CONSTRAINT `fk_news_sum_url` FOREIGN KEY (`news_url`) REFERENCES `News`(`URL`)
) COMMENT='ë‰´ìŠ¤ ìš”ì•½';

```

</div>
</details>

<details>
<summary>Portfolio Analysis</summary>
<div markdown="1">

```
CREATE TABLE `Portfolio_analysis` (
    `portfolio_id` INT NOT NULL AUTO_INCREMENT COMMENT 'í¬íŠ¸í´ë¦¬ì˜¤ ID',
    `conversation_id` INT NOT NULL COMMENT 'ëŒ€í™” ID',
    `user_id` VARCHAR(10) NOT NULL COMMENT 'ìœ ì € ID',
    `risk_score` INT NOT NULL COMMENT 'ë¦¬ìŠ¤í¬ ì ìˆ˜',
    `diversification_score` INT NOT NULL COMMENT 'ë¶„ì‚°ë„',
    `analysis_result` TEXT NOT NULL COMMENT 'ë¶„ì„ìš”ì•½',
    
    CONSTRAINT PRIMARY KEY (`portfolio_id`),
    CONSTRAINT `fk_port_ana_conv` FOREIGN KEY (`conversation_id`) REFERENCES `Chatbot`(`conversation_id`),
    CONSTRAINT `fk_port_ana_user` FOREIGN KEY (`user_id`) REFERENCES `login`(`user_id`)
) COMMENT='í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„';

```

</div>
</details>

* * *

### 7.2 ğŸˆDML
<details>
<summary>User</summary>
<div markdown="1">

```
-- íšŒì›ê°€ì… (ìš”êµ¬ì‚¬í•­ ì½”ë“œ : user_001)
INSERT INTO `users` VALUES
(7, 'ì‹ ê·œì´ë¦„', 'ì‹ ê·œíœ´ëŒ€ì „í™”', 'ì‹ ê·œì´ë©”ì¼', 1, 'ì •ìƒ', NOW());
```
```
-- ë¡œê·¸ì¸ (ìš”êµ¬ì‚¬í•­ ì½”ë“œ : user_002)
-- ë°©ë²•1. ID ë° IDë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©
SELECT users.user_name AS 'ì´ë¦„',
       login.user_id AS 'ID',
       login.user_pw AS 'IDë¹„ë°€ë²ˆí˜¸í•´ì‹œ'
FROM users
     INNER JOIN login ON users.user_no = login.user_no
WHERE users.user_status LIKE 'ì •ìƒ'
  AND login.user_id = 'ì‹ ê·œID' 
  AND login.user_pw = 'ì‹ ê·œIDë¹„ë°€ë²ˆí˜¸í•´ì‹œ';

-- ë°©ë²•2. ê°„í¸ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©
SELECT users.user_name AS 'ì´ë¦„',
       login.user_pin AS 'ê°„í¸ë¹„ë°€ë²ˆí˜¸í•´ì‹œ'
FROM users
     INNER JOIN login ON users.user_no = login.user_no
WHERE users.user_status LIKE 'ì •ìƒ' 
  AND login.user_pin = 'ì‹ ê·œê°„í¸ë¹„ë°€ë²ˆí˜¸í•´ì‹œ';
```
```
-- ID ì°¾ê¸° (ìš”êµ¬ì‚¬í•­ ì½”ë“œ : user_003)
DROP PROCEDURE IF EXISTS find_user_id;
DELIMITER $$
CREATE OR REPLACE PROCEDURE find_user_id(
   IN f_user_name VARCHAR(15),
	IN f_user_mobile CHAR(11),
	IN f_user_email VARCHAR(255)
)
BEGIN
	SELECT login.user_id AS 'ID' 
	FROM login
     	  INNER JOIN users ON login.user_no = users.user_no
   WHERE users.user_name = f_user_name
     AND users.user_mobile = f_user_mobile
     AND users.user_email = f_user_email; 	
END $$
DELIMITER ;

CALL find_user_id('ì‹ ê·œì´ë¦„', 'ì‹ ê·œíœ´ëŒ€ì „í™”', 'ì‹ ê·œì´ë©”ì¼');
```
```
-- IDë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • (ìš”êµ¬ì‚¬í•­ ì½”ë“œ : user_004)
UPDATE login
INNER JOIN users ON login.user_no = users.user_no
SET login.user_pw = 'ë¹„ë°€ë²ˆí˜¸ì¬ì„¤ì •'
WHERE users.user_status LIKE 'ì •ìƒ' 
  AND login.user_id = 'ì‹ ê·œID';

SELECT user_no AS 'ì‚¬ìš©ìê³ ìœ ë²ˆí˜¸',
       user_id AS 'ID',
       user_pw AS 'IDë¹„ë°€ë²ˆí˜¸í•´ì‹œ' 
FROM login;
```
```
-- íšŒì› íƒˆí‡´ (ìš”êµ¬ì‚¬í•­ ì½”ë“œ : user_005)
UPDATE users
INNER JOIN login ON users.user_no = login.user_no
SET users.user_status = 'íƒˆí‡´'
WHERE login.user_id = 'ì‹ ê·œID';

SELECT user_no AS 'ì‚¬ìš©ìê³ ìœ ë²ˆí˜¸',
       user_name AS 'ì´ë¦„',
       user_status AS 'ìƒíƒœ' 
FROM users;

```

</div>
</details>

<details>
<summary>Stock</summary>
<div markdown="1">

```
-- ============================================
-- 1. STOCK_001 (ì¢…ëª© ê²€ìƒ‰)
-- ì‚¬ìš©ìê°€ ì¢…ëª©ëª… ë˜ëŠ” ì¢…ëª©ì½”ë“œë¡œ ë¶€ë¶„ ì¼ì¹˜ ê²€ìƒ‰
-- ============================================
SET @target_stock01 = '05'; -- ì‚¼ì„±ì „ì, í˜„ëŒ€ì°¨
SELECT s.stock_code,
		 s.stock_name,
		 s.market_type,
		 sp.current_price,
		 sp.prev_close,
		 sp.change_amount,
		 sp.change_rate
FROM stocks s
INNER JOIN stock_price sp ON s.stock_code = sp.stock_code
WHERE s.stock_name LIKE CONCAT('%', @target_stock01, '%')  -- íŒŒë¼ë¯¸í„°: ê²€ìƒ‰ì–´
      OR s.stock_code LIKE CONCAT('%', @target_stock01, '%')
ORDER BY s.stock_name
LIMIT 20;
```
```
-- ============================================
-- 2. STOCK_002 (ê´€ì‹¬ì¢…ëª© ë“±ë¡)
-- ============================================
-- í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤: 1ë²ˆ ìœ ì €ê°€ 'RTX' ì¢…ëª©ì„ ë“±ë¡í•˜ë ¤ê³  í•¨
SET @u_no01 = 1;
SET @s_code01 = 'RTX';

INSERT INTO watchlist (user_no, stock_code)
SELECT @u_no01, @s_code01
WHERE (SELECT COUNT(*) FROM watchlist WHERE user_no = @u_no01) < 50 
  AND EXISTS (SELECT 1 FROM stocks WHERE stock_code = @s_code01)
  AND NOT EXISTS (SELECT 1 FROM watchlist WHERE user_no = @u_no01 AND stock_code = @s_code01);
```
```
-- ============================================
-- 3. STOCK_003 (ê´€ì‹¬ì¢…ëª© ì‚­ì œ)
-- ============================================
-- í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤: 1ë²ˆ ìœ ì €ê°€ 'RTX' ì¢…ëª©ì„ ì‚­ì œí•˜ë ¤ê³  í•¨
SET @u_no02 = 1;
SET @s_code02 = 'RTX';
DELETE FROM watchlist
WHERE user_no = @u_no02  -- íŒŒë¼ë¯¸í„°: ì‚¬ìš©ìë²ˆí˜¸
  AND stock_code = @s_code02;  -- íŒŒë¼ë¯¸í„°: ì¢…ëª©ì½”ë“œ
```
```
-- ============================================
-- 4. STOCK_004 (ê´€ì‹¬ì¢…ëª© ì¡°íšŒ)
-- ì‚¬ìš©ìì˜ ê´€ì‹¬ì¢…ëª© ëª©ë¡ ì¡°íšŒ
-- ============================================
SET @u_no03 = 4; -- êµ­ì¥ì„ ì¢‹ì•„í•˜ëŠ” ì• êµ­ì¸
SELECT w.watchlist_id,
		 w.stock_code,
		 s.stock_name,
		 sp.current_price,
		 sp.change_rate,
		 w.added_at
FROM watchlist w
INNER JOIN stocks s ON w.stock_code = s.stock_code
INNER JOIN stock_price sp ON s.stock_code = sp.stock_code
WHERE w.user_no = @u_no03  -- íŒŒë¼ë¯¸í„°: ì‚¬ìš©ìë²ˆí˜¸
ORDER BY w.added_at DESC;
```
```

-- ============================================
-- 5. STOCK_005 (ë§¤ìˆ˜ ì£¼ë¬¸)
-- ============================================
DELIMITER $$

CREATE OR REPLACE PROCEDURE sp_buy_stock(
    IN p_user_no INT,       -- ì‚¬ìš©ì ë²ˆí˜¸
    IN p_account_id BIGINT, -- ê³„ì¢Œ ID
    IN p_stock_code VARCHAR(10), -- ì¢…ëª© ì½”ë“œ
    IN p_quantity INT       -- ë§¤ìˆ˜ ìˆ˜ëŸ‰
)
BEGIN
    -- ë‚´ë¶€ ë³€ìˆ˜ ì„ ì–¸
    DECLARE v_current_price DECIMAL(15,2);
    DECLARE v_deposit BIGINT;
    DECLARE v_total_amount DECIMAL(20,2);

    -- 1. í˜„ì¬ê°€ ì¡°íšŒ
    SELECT current_price INTO v_current_price
    FROM stock_price
    WHERE stock_code = p_stock_code;

    -- 2. ì˜ˆìˆ˜ê¸ˆ í™•ì¸
    SELECT deposit INTO v_deposit
    FROM accounts
    WHERE account_id = p_account_id;

    -- 3. ì²´ê²°ê¸ˆì•¡ ê³„ì‚°
    SET v_total_amount = v_current_price * p_quantity;

    -- 4. íŠ¸ëœì­ì…˜ ë° ìœ íš¨ì„± ê²€ì‚¬ ì‹œì‘
    IF v_deposit >= v_total_amount THEN
        START TRANSACTION;
        
        -- 5. ì²´ê²° ë‚´ì—­ ì €ì¥
        INSERT INTO trades (user_no, stock_code, account_id, trade_type, quantity, price, total_amount)
        VALUES (p_user_no, p_stock_code, p_account_id, 'BUY', p_quantity, v_current_price, v_total_amount);
        
        -- 6. ì˜ˆìˆ˜ê¸ˆ ì°¨ê°
        UPDATE accounts
        SET deposit = deposit - v_total_amount
        WHERE account_id = p_account_id;
        
        -- 7. í¬íŠ¸í´ë¦¬ì˜¤ ì—…ë°ì´íŠ¸ (ì´ë¯¸ ìˆìœ¼ë©´ ìˆ˜ëŸ‰/í‰ë‹¨ê°€ ê°±ì‹ , ì—†ìœ¼ë©´ ì¶”ê°€)
        INSERT INTO portfolios (user_no, stock_code, account_id, quantity, avg_price)
        VALUES (p_user_no, p_stock_code, p_account_id, p_quantity, v_current_price)
        ON DUPLICATE KEY UPDATE
            avg_price = ((avg_price * quantity) + (v_current_price * p_quantity)) / (quantity + p_quantity),
            quantity = quantity + p_quantity,
            updated_at = CURRENT_TIMESTAMP;
        
        COMMIT;
        SELECT 'ë§¤ìˆ˜ ì²´ê²° ì™„ë£Œ' AS result_msg;
    ELSE
        -- ì˜ˆìˆ˜ê¸ˆ ë¶€ì¡± ì‹œ ì—ëŸ¬ ë°œìƒ ë° ë¡¤ë°±
        SIGNAL SQLSTATE '45000' 
        SET MESSAGE_TEXT = 'ì˜ˆìˆ˜ê¸ˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤. (ì”ì•¡ ë¶€ì¡±)';
    END IF;
END $$
DELIMITER ;
```
```
-- ============================================
-- 6. STOCK_006 (ë§¤ë„ ì£¼ë¬¸)
-- ============================================
DELIMITER $$
CREATE OR REPLACE PROCEDURE sp_sell_stock(
    IN p_user_no INT,           -- ì‚¬ìš©ì ë²ˆí˜¸
    IN p_account_id BIGINT,     -- ê³„ì¢Œ ID
    IN p_stock_code VARCHAR(10),-- ì¢…ëª© ì½”ë“œ
    IN p_quantity INT           -- ë§¤ë„ ìˆ˜ëŸ‰
)
BEGIN
    -- ë‚´ë¶€ ë³€ìˆ˜ ì„ ì–¸
    DECLARE v_current_price DECIMAL(15,2);
    DECLARE v_owned_quantity INT DEFAULT 0;
    DECLARE v_total_amount DECIMAL(20,2);

    -- 1. í˜„ì¬ê°€ ì¡°íšŒ
    SELECT current_price INTO v_current_price
    FROM stock_price
    WHERE stock_code = p_stock_code;

    -- 2. í˜„ì¬ ë³´ìœ  ìˆ˜ëŸ‰ ì¡°íšŒ (í•´ë‹¹ ê³„ì¢Œì˜ í•´ë‹¹ ì¢…ëª©)
    SELECT quantity INTO v_owned_quantity
    FROM portfolios
    WHERE account_id = p_account_id AND stock_code = p_stock_code;

    -- 3. ì²´ê²°ê¸ˆì•¡ ê³„ì‚°
    SET v_total_amount = v_current_price * p_quantity;

    -- 4. ìœ íš¨ì„± ê²€ì‚¬ ë° íŠ¸ëœì­ì…˜ ì‹œì‘
    IF v_owned_quantity IS NOT NULL AND v_owned_quantity >= p_quantity THEN
        START TRANSACTION;
        
        -- 5. ì²´ê²° ë‚´ì—­ ì €ì¥ (SELL íƒ€ì…)
        INSERT INTO trades (user_no, stock_code, account_id, trade_type, quantity, price, total_amount)
        VALUES (p_user_no, p_stock_code, p_account_id, 'SELL', p_quantity, v_current_price, v_total_amount);
        
        -- 6. ì˜ˆìˆ˜ê¸ˆ ì¦ê°€ (ë§¤ë„ ëŒ€ê¸ˆ ì…ê¸ˆ)
        UPDATE accounts
        SET deposit = deposit + v_total_amount
        WHERE account_id = p_account_id;
        
        -- 7. í¬íŠ¸í´ë¦¬ì˜¤ ì°¨ê°
        UPDATE portfolios
        SET quantity = quantity - p_quantity,
            updated_at = CURRENT_TIMESTAMP
        WHERE account_id = p_account_id AND stock_code = p_stock_code;
        
        -- 8. ìˆ˜ëŸ‰ì´ 0ì´ ë˜ë©´ í¬íŠ¸í´ë¦¬ì˜¤ì—ì„œ ì‚­ì œ
        DELETE FROM portfolios
        WHERE account_id = p_account_id 
          AND stock_code = p_stock_code 
          AND quantity <= 0;
        
        COMMIT;
        SELECT 'ë§¤ë„ ì²´ê²° ì™„ë£Œ' AS result_msg;
    ELSE
        -- ë³´ìœ  ìˆ˜ëŸ‰ì´ ë¶€ì¡±í•˜ê±°ë‚˜ ì¢…ëª©ì´ ì—†ëŠ” ê²½ìš°
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ë³´ìœ  ìˆ˜ëŸ‰ì´ ë¶€ì¡±í•˜ê±°ë‚˜ ë¯¸ë³´ìœ í•˜ì—¬ ë§¤ë„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
    END IF;
END $$
DELIMITER ;
```
```
-- ============================================
-- 7. STOCK_007 (ì£¼ë¬¸ ê°€ëŠ¥ ìˆ˜ëŸ‰ ì¡°íšŒ)
-- í˜„ì¬ ì˜ˆìˆ˜ê¸ˆìœ¼ë¡œ ë§¤ìˆ˜ ê°€ëŠ¥í•œ ìµœëŒ€ ìˆ˜ëŸ‰ ì¡°íšŒ
-- ============================================
SELECT account_id, user_no
FROM `accounts`;

-- SET @acc_id = 1;         -- ë¯¼ì •ê¸° ê³„ì¢Œ (850ë§Œ7ì²œì›)
-- SET @s_code = '005930';  -- ì‚¼ì„±ì „ì 149300ì›: 56ê°œê¹Œì§€ ì¶”ê°€êµ¬ë§¤ ê°€ëŠ¥

SET @acc_id = 4;            -- ë°©ì§€í˜ ê³„ì¢Œ(300ë§Œì›) 
SET @s_code = '000660';     -- SKí•˜ì´ë‹‰ìŠ¤ 764,000ì›: 3ê°œê¹Œì§€ ì¶”ê°€êµ¬ë§¤ ê°€ëŠ¥

SELECT 
    a.deposit,
    sp.current_price,
    FLOOR(a.deposit / sp.current_price) AS max_quantity
FROM accounts a
CROSS JOIN stock_price sp
-- ì¢…ëª© ê°€ê²©ê³¼ ê³„ì¢Œ ì”ì•¡ì€ ì§ì ‘ì ì¸ ì—°ê²° ê³ ë¦¬ê°€ ì—†ì–´ì„œ CROSS JOIN
WHERE a.account_id = @acc_id  -- íŒŒë¼ë¯¸í„°: ê³„ì¢ŒID
  AND sp.stock_code = @s_code;  -- íŒŒë¼ë¯¸í„°: ì¢…ëª©ì½”ë“œ
```
```
-- ============================================
-- 8. STOCK_008 (ê±°ë˜ í†µê³„ì¡°íšŒ)
-- ì‚¬ìš©ìì˜ ì´ë²ˆë‹¬ ì´ ê±°ë˜íšŸìˆ˜ ë° ê¸ˆì•¡ ì¡°íšŒ
-- ============================================
SET @u_no06 = 1;
-- 1485000 + 1350000 + 2986000 + 1493000 = 7,314,000
SELECT COUNT(*) AS trade_count,
		 SUM(total_amount) AS total_amount
FROM trades
WHERE user_no = @u_no06
  AND YEAR(trade_time) = YEAR(CURDATE())
  AND MONTH(trade_time) = MONTH(CURDATE());
```
```
-- ============================================
-- 9. STOCK_009 (í‰ê·  ë§¤ìˆ˜ ë° ë§¤ë„ê°€ ì¡°íšŒ)
-- ì‚¬ìš©ìì˜ ì¢…ëª©ë³„ í‰ê·  ë§¤ìˆ˜ê°€ê²©, í‰ê·  ë§¤ë„ê°€ê²©
-- ============================================
SET @target_user = 1;
SELECT 
    s.stock_code,
    s.stock_name,
    AVG(CASE WHEN t.trade_type = 'BUY' THEN t.price ELSE NULL END) AS avg_buy_price,
    AVG(CASE WHEN t.trade_type = 'SELL' THEN t.price ELSE NULL END) AS avg_sell_price,
    SUM(CASE WHEN t.trade_type = 'BUY' THEN t.quantity ELSE 0 END) AS total_bought,
    SUM(CASE WHEN t.trade_type = 'SELL' THEN t.quantity ELSE 0 END) AS total_sold
FROM trades t
JOIN stocks s ON t.stock_code = s.stock_code
WHERE t.user_no = @target_user  -- íŒŒë¼ë¯¸í„°: ì‚¬ìš©ìë²ˆí˜¸
GROUP BY s.stock_code, s.stock_name
ORDER BY s.stock_name;
```
```
-- ============================================
-- 10. STOCK_010 (ì†ìµ ìˆœìœ„ ì •ë ¬)
-- ë³´ìœ ì¢…ëª©ì„ ìˆ˜ìµë¥  ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
-- ============================================
SET @target_acc = 2;
SELECT 
    p.portfolio_id,
    s.stock_code,
    s.stock_name,
    p.quantity,
    p.avg_price,
    sp.current_price,
    (sp.current_price * p.quantity) AS eval_amount,
    ((sp.current_price - p.avg_price) * p.quantity) AS profit_loss,
    (((sp.current_price - p.avg_price) / p.avg_price) * 100) AS profit_rate
FROM portfolios p
JOIN stocks s ON p.stock_code = s.stock_code
JOIN stock_price sp ON s.stock_code = sp.stock_code
WHERE p.account_id = @target_acc  -- íŒŒë¼ë¯¸í„°: ê³„ì¢ŒID
ORDER BY profit_rate DESC;  -- ìˆ˜ìµë¥  ë†’ì€ ìˆœ
```
```
-- ============================================
-- 11. STOCK_011 (ê³„ì¢Œ ìš”ì•½ ì¡°íšŒ)
-- ê³„ì¢Œ ì „ì²´ ìš”ì•½ ì •ë³´
-- ============================================
-- SET @target_acc = 1; -- ë¶€ì
SET @target_acc = 5; -- ê±°ì§€

SELECT 
    a.account_id,
    a.deposit AS deposit,
    COALESCE(SUM(p.avg_price * p.quantity), 0) AS total_buy_amount,
    COALESCE(SUM(sp.current_price * p.quantity), 0) AS total_eval_amount,
    COALESCE(SUM((sp.current_price - p.avg_price) * p.quantity), 0) AS total_profit_loss,
    CASE 
        WHEN SUM(p.avg_price * p.quantity) > 0 
        THEN (SUM((sp.current_price - p.avg_price) * p.quantity) / SUM(p.avg_price * p.quantity) * 100)
        ELSE 0 
    END AS total_profit_rate
FROM accounts a
LEFT JOIN portfolios p ON a.account_id = p.account_id
LEFT JOIN stock_price sp ON p.stock_code = sp. stock_code
WHERE a.account_id = @target_acc  -- íŒŒë¼ë¯¸í„°: ê³„ì¢ŒID
GROUP BY a.account_id, a.deposit;
```
```
-- ============================================
-- 13. STOCK_013 (ì²´ê²°ë‚´ì—­ ì¡°íšŒ)
-- ì§€ì • ê¸°ê°„ ë‚´ ì²´ê²° ë‚´ì—­ ì¡°íšŒ
-- ============================================
SET @target_acc = 1;
SET @start_time = '2025-12-01 00:00:00'; -- 12ì›” ì´ˆë¶€í„°
SET @end_time   = '2026-01-20 23:59:59'; -- ì˜¤ëŠ˜ ë°¤ê¹Œì§€
-- ê¸°ê°„ ì§€ì • ì¡°íšŒ
SELECT t.trade_id,
       s.stock_code,
	    s.stock_name,
	    t.trade_type,
       t.quantity,
   	 t.price,
	    t.total_amount,
	    t.trade_time
FROM trades t
JOIN stocks s ON t.stock_code = s.stock_code
WHERE t.account_id = @target_acc
  AND t.trade_time BETWEEN @start_time AND @end_time  -- íŒŒë¼ë¯¸í„°: ì‹œì‘ì¼, ì¢…ë£Œì¼
ORDER BY t.trade_time DESC
LIMIT 100;
```

</div>
</details>

<details>
<summary>Board</summary>
<div markdown="1">

```
INSERT INTO posts (user_no, title, content, is_admin_post, post_like, post_dislike) 
VALUES 
(1, 'ì‹œìŠ¤í…œ ì ê²€  ì•ˆë‚´', '1ì‹œ ~ 3ì‹œ ì ê²€ ì‹œê°„ì…ë‹ˆë‹¤..', 'admin', 3, 0),
(2, 'ì‚¼ì„±ì „ì ì „ë§', 'í–¥í›„ ì£¼ê°€ ì–´ë–»ê²Œ ë³´ì‹œë‚˜ìš”?', 'user', 4, 0);
```
```
-- notification
INSERT INTO notification (notification_type, message)
VALUES
('POST', 'ìƒˆ ê²Œì‹œê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.'),
('COMMENT', 'ê²Œì‹œê¸€ì— ìƒˆ ëŒ“ê¸€ì´ ë‹¬ë ¸ìŠµë‹ˆë‹¤.');

```
```
-- user_notification 
INSERT INTO user_notification (notification_id, user_no, is_read, read_at) 
VALUES 
(1, 1, FALSE, NULL),
(2, 2, TRUE, NOW());
```
```
-- ê²Œì‹œê¸€ ìˆ˜ì • (ì œëª© + ë‚´ìš©) 
UPDATE posts 
SET title = 'ì‚¼ì„±ì „ì ì „ë§ (ì—…ë°ì´íŠ¸)', 
	 content = 'ì£¼ê°€ ë™í–¥ ì•Œê³  ì‹¶ìŠµë‹ˆë‹¤.', 
	 updated_at = CURRENT_TIMESTAMP 
WHERE post_id = 2;

SELECT title,
		 content,
		 updated_at
FROM posts
WHERE post_id = 2;
```
```
-- ê²Œì‹œê¸€ ì¢‹ì•„ìš” ì¦ê°€ ë° ê²Œì‹œê¸€ ì‚­ì œ í™•ì¸ ì¡°íšŒ
UPDATE posts
SET
  post_like = CASE
    WHEN post_id = 1 THEN post_like + 1
    ELSE post_like
  END,
  post_del = CASE
    WHEN post_id = 2 THEN 1
    ELSE post_del
  END
WHERE post_id IN (1, 2);

SELECT p.title,
		 p.post_like,
		 p.post_del
FROM posts p;
```
```
-- ëŒ“ê¸€ ë‚´ìš© ìˆ˜ì • 
UPDATE comments 
SET content = 'ë‹µë³€ ê°ì‚¬í•©ë‹ˆë‹¤.', 
updated_at = CURRENT_TIMESTAMP 
WHERE comment_id = 2;

SELECT u.user_name,
		 c.content,
		 c.updated_at
FROM comments c
INNER JOIN users u ON u.user_no = c.user_no
WHERE comment_id = 2;
```
```
-- ëŒ“ê¸€ ì¢‹ì•„ìš” ì¦ê°€ ë° ëŒ“ê¸€ ì‚­ì œ
UPDATE comments
SET
  comment_like = CASE
    WHEN comment_id = 1 THEN comment_like + 1
    ELSE comment_like
  END,
  comment_del = CASE
    WHEN comment_id = 2 THEN 1
    ELSE comment_del
  END
WHERE comment_id IN (1, 2);

SELECT u.user_name,
		 comment_id,
  		 comment_like,
  		 comment_del
FROM comments c
INNER JOIN users u ON u.user_no = c.user_no;
```
```

-- íŠ¹ì • ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ 
UPDATE user_notification 
SET is_read = TRUE, 
	 read_at = NOW() 
WHERE user_no = 1 AND notification_id = 1;

-- ì¡°íšŒ
SELECT u.user_name,
		 un.is_read,
		 un.read_at
FROM user_notification un
INNER JOIN users u ON u.user_no = un.user_no
WHERE un.user_no = 1 AND un.notification_id = 1;
```

</div>
</details>

<details>
<summary>Account</summary>
<div markdown="1">

```
-- ê³„ì¢Œ ê´€ë ¨ DML
-- ========================================== 
-- 1. ì¦ê¶Œ ê³„ì¢Œ ê°œì„¤ (ACCT-001)
-- ==========================================
-- ë¯¼ì •ê¸°(user_no=1) ê³„ì¢Œ ê°œì„¤

INSERT INTO accounts (
    user_no, 
    account_number, 
    account_name, 
    deposit, 
    margin, 
    status
)
VALUES (
    1,
    CONCAT(
        LPAD(YEAR(NOW()) MOD 100, 2, '0'),
        LPAD(1, 8, '0'),
        LPAD(
            (SELECT COALESCE(COUNT(*), 0) + 1 
             FROM accounts 
             WHERE user_no = 1),
            6, '0'
        )
    ),
    'ë¯¼ì •ê¸° ìœ„íƒê³„ì¢Œ',
    0,
    0,
    'ì •ìƒ'
);
```

```
-- ==========================================
-- 2. ì¦ê¶Œ ê³„ì¢Œ ì •ë³´ ì¡°íšŒ (ACCT-002)
-- ==========================================

SET @test_account_id= 2;

SELECT a.account_id AS 'ê³„ì¢Œ ID',
       a.user_no AS 'ì‚¬ìš©ì ë²ˆí˜¸',
       a.account_number AS 'ê³„ì¢Œë²ˆí˜¸',
       a.account_name AS 'ê³„ì¢Œëª…',
       a.deposit AS 'ì˜ˆìˆ˜ê¸ˆ',
       a.margin AS 'ì¦ê±°ê¸ˆ',
       a.status AS 'ê³„ì¢Œìƒíƒœ',
       (a.deposit - a.margin) AS 'ì£¼ë¬¸ê°€ëŠ¥ê¸ˆì•¡',
       (a.deposit - a.margin) AS 'ì¶œê¸ˆê°€ëŠ¥ê¸ˆì•¡',
       COALESCE(SUM(p.quantity * sp.current_price), 0) AS 'ë³´ìœ ì£¼ì‹í‰ê°€ì•¡',
       (a.deposit + COALESCE(SUM(p.quantity * sp.current_price), 0)) AS 'ì´í‰ê°€ê¸ˆì•¡',
       a.last_transaction_at AS 'ìµœì¢…ê±°ë˜ì¼ì‹œ'
FROM accounts a
LEFT JOIN portfolios p ON a.account_id = p.account_id
LEFT JOIN stock_price sp ON p.stock_code = sp.stock_code
WHERE a.account_id = @test_account_id
GROUP BY a.account_id;
```
```

-- ==========================================
-- 3. ê³„ì¢Œ ìƒíƒœ ë³€ê²½ (ACCT-003)
-- ==========================================

SET @test_account_id= 1;

-- 3-1. ì •ìƒ â†’ ì •ì§€ (ê´€ë¦¬ì ê¶Œí•œ) 
UPDATE accounts
SET status = 'ì •ì§€'
WHERE account_id = @test_account_id
  AND status = 'ì •ìƒ';

-- 3-2. ì •ìƒ â†’ íœ´ë©´ (365ì¼ ë¯¸ì‚¬ìš© ì‹œ ìë™)
-- í…ŒìŠ¤íŠ¸ìš©: last_transaction_atì„ 1ë…„ ì „ìœ¼ë¡œ ë¨¼ì € ì„¤ì •
UPDATE accounts
SET last_transaction_at = DATE_SUB(NOW(), INTERVAL 366 DAY)
WHERE account_id = @test_account_id;

UPDATE accounts
SET status = 'íœ´ë©´'
WHERE status = 'ì •ìƒ'
  AND DATEDIFF(CURRENT_DATE, last_transaction_at) >= 365;


-- 3-4. ì •ìƒ â†’ í•´ì§€ 
UPDATE accounts
SET status = 'í•´ì§€'
WHERE account_id = @test_account_id
  AND status = 'ì •ìƒ'
  AND deposit = 0
  AND margin = 0
  AND NOT EXISTS (
      SELECT 1 FROM portfolios 
      WHERE account_id = @test_account_id
        AND quantity > 0
  );
```
```

-- ==========================================
-- 4. ìœ ì € ê³„ì¢Œ ëª©ë¡ ì¡°íšŒ (ACCT-004)
-- ==========================================

SET @test_user_no = 1;

SELECT a.account_id AS 'ê³„ì¢Œ ID',
       a.account_number AS 'ê³„ì¢Œë²ˆí˜¸',
       a.account_name AS 'ê³„ì¢Œëª…',
       a.deposit AS 'ì˜ˆìˆ˜ê¸ˆ',
       a.margin AS 'ì¦ê±°ê¸ˆ',
       ROUND(COALESCE(SUM(p.quantity * sp.current_price), 0), 0) AS 'ë³´ìœ ì£¼ì‹í‰ê°€ì•¡',
       ROUND(a.deposit + COALESCE(SUM(p.quantity * sp.current_price), 0), 0) AS 'ì´í‰ê°€ê¸ˆì•¡',  -- ROUND ì¶”ê°€, 0 ì¶”ê°€
       TRUNCATE(COALESCE(SUM(p.quantity * p.avg_price), 0), 0) AS 'ì´ë§¤ì…ê¸ˆì•¡',  -- 0 ì¶”ê°€
       COALESCE(
		 		CASE 
               WHEN SUM(p.quantity * p.avg_price) > 0 THEN
                    ROUND(((SUM(p.quantity * sp.current_price) - SUM(p.quantity * p.avg_price)) / SUM(p.quantity * p.avg_price) * 100), 2)
               ELSE 0
         	END, 0) AS 'ì†ìµë¥ (%)',
       ROUND(COALESCE((SUM(p.quantity * sp.current_price) - SUM(p.quantity * p.avg_price)), 0), 0) AS 'í‰ê°€ì†ìµ',
       a.status AS 'ê³„ì¢Œìƒíƒœ',
       a.last_transaction_at AS 'ìµœì¢…ê±°ë˜ì¼ì‹œ'
FROM accounts a
LEFT JOIN portfolios p ON a.account_id = p.account_id
LEFT JOIN stock_price sp ON p.stock_code = sp.stock_code
WHERE a.user_no = @test_user_no
GROUP BY a.account_id
ORDER BY a.last_transaction_at DESC;
```
```

-- ==========================================
-- 5. ì¦ê¶Œ ê³„ì¢Œ ì…ê¸ˆ (TRANS_001)
-- ==========================================

SET @test_account_id= 7;
SET @test_amount = 10000000;

START TRANSACTION;

UPDATE accounts
SET deposit = deposit + @test_amount,
    last_transaction_at = CURRENT_TIMESTAMP
WHERE account_id = @test_account_id;

INSERT INTO deposit_withdraw_history (account_id, transaction_type, amount, balance_after)
VALUES (@test_account_id, 'ì…ê¸ˆ', @test_amount, (SELECT deposit FROM accounts WHERE account_id = @test_account_id));

COMMIT;
```
```

-- ==========================================
-- 6. ì¦ê¶Œ ê³„ì¢Œ ì¶œê¸ˆ (TRANS_002)
-- ==========================================

SET @test_account_id = 7;
SET @test_amount = 10000000;

START TRANSACTION;

SELECT (deposit - margin) AS available_amount
FROM accounts
WHERE account_id = @test_account_id
  AND (deposit - margin) >= @test_amount
  AND status = 'ì •ìƒ'
FOR UPDATE;

UPDATE accounts
SET deposit = deposit - @test_amount,
    last_transaction_at = CURRENT_TIMESTAMP
WHERE account_id = @test_account_id;

INSERT INTO deposit_withdraw_history (account_id, transaction_type, amount, balance_after)
VALUES (@test_account_id, 'ì¶œê¸ˆ', @test_amount, (SELECT deposit FROM accounts WHERE account_id = @test_account_id));

COMMIT;
```
```

-- ==========================================
-- 7. ì…ì¶œê¸ˆ ë‚´ì—­ ì¡°íšŒ (TRANS_003)
-- ==========================================

SET @test_account_id = 7;

SELECT transaction_id AS 'ê±°ë˜ë²ˆí˜¸',
       transaction_type AS 'ê±°ë˜ìœ í˜•',
       amount AS 'ê¸ˆì•¡',
       balance_after AS 'ê±°ë˜ í›„ ì”ì•¡',
       transaction_at AS 'ê±°ë˜ì¼ì‹œ'
FROM deposit_withdraw_history
WHERE account_id = @test_account_id
  AND transaction_at >= DATE_SUB(CURRENT_DATE, INTERVAL 3 MONTH)
ORDER BY transaction_at DESC;
```

</div>
</details>

<details>
<summary>Loan</summary>
<div markdown="1">



</div>
</details>

<details>
<summary>Chat Bot</summary>
<div markdown="1">

```
-- ì‚¬ìš©ìì˜ ì§ˆë¬¸ ì…ë ¥ (ì±—ë´‡)
INSERT INTO `Chatbot` (`Message`, `Role`, `user_id`) 
VALUES ('í˜„ì¬ ë‚´ ì‚¼ì„±ì „ì ì£¼ì‹ ë¹„ì¤‘ì´ ì ì ˆí•œì§€ ë¶„ì„í•´ì¤˜.', 'User', 'user_01');

-- ì±—ë´‡ì˜ ë‹µë³€ ì…ë ¥ (ìœ„ ì§ˆë¬¸ì— ëŒ€í•œ ì‘ë‹µ, Conversation_idëŠ” ìë™ ìƒì„±ë¨)
INSERT INTO `Chatbot` (`Message`, `Role`, `user_id`) 
VALUES ('ë„¤, í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ë¶„ì„í•œ ê²°ê³¼ ë¦¬ìŠ¤í¬ ì ìˆ˜ëŠ” 75ì ì…ë‹ˆë‹¤.', 'Bot', 'user_01');

-- ìƒˆë¡œìš´ ë‰´ìŠ¤ ê¸°ì‚¬ ì¶”ê°€ (ë‰´ìŠ¤)
INSERT INTO `News` (`Title`, `Content`, `Publisher`, `URL`, `Published_at`, `Hash`, `stock_code`)
VALUES (
    'ì‚¼ì„±ì „ì, ì°¨ì„¸ëŒ€ ë°˜ë„ì²´ ê³µì • ë°œí‘œ', 
    'ì‚¼ì„±ì „ìê°€ ì˜¤ëŠ˜ ìƒˆë¡œìš´ 2ë‚˜ë…¸ ê³µì • ë¡œë“œë§µì„ ë°œí‘œí–ˆìŠµë‹ˆë‹¤...', 
    'ê²½ì œì¼ë³´', 
    'https://news.example.com/samsung/123', 
    '2026-01-19', 
    'a1b2c3d4e5f6g7h8i9j0', 
    '005930'
);
```
```
-- íŠ¹ì • ë‰´ìŠ¤(News_id=1)ì— ëŒ€í•œ ìš”ì•½ ê²°ê³¼ ì €ì¥ (ë‰´ìŠ¤ ìš”ì•½)
INSERT INTO `news_summary` (`news_summary_id`, `Converstaion_id`, `News_id`, `summary`, `sentiment`, `news_url`)
VALUES (
    1, 
    1, -- Chatbot í…Œì´ë¸”ì˜ Conversation_id ì°¸ì¡°
    1, -- News í…Œì´ë¸”ì˜ News_id ì°¸ì¡°
    'ì‚¼ì„±ì „ìê°€ ì°¨ì„¸ëŒ€ ë°˜ë„ì²´ ì‹œì¥ ì£¼ë„ê¶Œì„ ìœ„í•´ 2ë‚˜ë…¸ ê³µì • ê³„íšì„ êµ¬ì²´í™”í•¨.', 
    'POSITIVE', 
    'https://news.example.com/samsung/123'
);
```
```
-- ì‚¬ìš©ì í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„ ê²°ê³¼ ì €ì¥ (í¬íŠ¸í´ë¦¬ì˜¤ ì €ì¥)
INSERT INTO `portfolio_analysis` (`portfolio_id`, `user_id`, `risk_score`, `diversification_score`, `analysis_result`, `Converstaion_id`)
VALUES (
    1, 
    'user_01', 
    75, 
    40, 
    'í˜„ì¬ IT ì„¹í„° ë¹„ì¤‘ì´ ë„ˆë¬´ ë†’ìŠµë‹ˆë‹¤. ì±„ê¶Œì´ë‚˜ ë°°ë‹¹ì£¼ë¡œ ë¶„ì‚° íˆ¬ìê°€ í•„ìš”í•©ë‹ˆë‹¤.', 
    2 -- Chatbot í…Œì´ë¸”ì˜ Conversation_id ì°¸ì¡°
);
```

```
-- ì‚¼ì„±ì „ì(005930)ì— ëŒ€í•œ ì¢…í•© ìš”ì•½ ì •ë³´ ì €ì¥ (ìš”ì•½)
INSERT INTO `Stock_Summary` (`Summary`, `Converstaion_id`, `stock_code`)
VALUES (
    'ìµœê·¼ ë°˜ë„ì²´ ì—…í™© ê°œì„  ê¸°ëŒ€ê°ê³¼ ì™¸êµ­ì¸ ë§¤ìˆ˜ì„¸ê°€ ìœ ì…ë˜ë©° ê¸ì •ì ì¸ ì „ë§ì´ ìš°ì„¸í•©ë‹ˆë‹¤.', 
    3, 
    '005930'
);

-- FR-STOCK-003 ìš”ì•½ ì—…ë°ì´íŠ¸.
UPDATE Stock_Summary 
SET Summary = 'ì—…ì¢… í‰ê·  ëŒ€ë¹„ ì €í‰ê°€ ìƒíƒœë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.' 
WHERE stock_code = '005930';

```

</div>
</details>

* * *

### 7.3 ğŸTest Case

<details>
<summary>ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤</summary>
<div markdown="1">
ê³„ì¢Œ ìƒì„±
<img src="img/DML/accounts/ACCT_001.png">
ê´€ì‹¬ì¢…ëª© ì¡°íšŒ
<img src="img/DML/accounts/ACCT_004.png">
ê´€ë¦¬ì ë¡œê·¸ì¸
<img src="img/DML/admin/ADMIN_001.png">
ê³µì§€ì‚¬í•­ ë° ì•Œë¦¼
<img src="img/DML/admin/ADMIN_004.png">
ëŒ“ê¸€ì‘ì„± 
<img src="img/DML/board/COMMENT_001.png">
ì¢‹ì•„ìš” ì¦ê°€ ë° ì‚­ì œëœ ê²Œì‹œë¬¼ ì¢‹ì•„ìš” í™•ì¸
<img src="img/DML/board/LIKE_001.png">
ì£¼ì‹ ê±°ë˜ í•˜ê¸°ì „ ì¢…ëª© ê²€ìƒ‰
<img src="img/DML/stock/STOCK_001.png">
ì‹œë‚˜ë¦¬ì˜¤ ë§¤ë„ ê²°ê³¼
<img src="img/DML/stock/STOCK_006_4-ì‹œë‚˜ë¦¬ì˜¤1(ë§¤ë„ê²°ê³¼-ê³„ì¢Œ).png">	
íšŒì› ê°€ì…
<img src="img/DML/user/USER_001-1.png">
ID, ë¹„ë°€ë²ˆí˜¸ ì¬ ì„¤ì •
<img src="img/DML/user/USER_005.png">
	
</div>
</details>

* * *

## 8. ğŸ‰í›„ê¸°.

##### ë¯¼ì •ê¸°
íŒ€ì¥ìœ¼ë¡œì¨ ë°ì´í„°ë² ì´ìŠ¤ êµ¬í˜„ì„ ì²˜ìŒìœ¼ë¡œ í–ˆëŠ”ë° ìƒê°ë³´ë‹¤ íŒ€ì›ë“¤ì´ ì˜ ë”°ë¼ì¤˜ì„œ í° ë§‰í˜ê³¼ ê°ˆë“±ì—†ì´ ì˜ ëë‚œ í”„ë¡œì íŠ¸ì—¬ì„œ ë‹¤í–‰ì…ë‹ˆë‹¤. ë‹¤ë“¤ í•˜ê³ ì‹¶ì€ ì£¼ì œ ë˜ëŠ” êµ¬í˜„í•˜ê³  ì‹¶ì€ ë‚´ìš©ì´ ìˆì—ˆê² ì§€ë§Œ ê·¸ëŸ¬í•œ ìš•êµ¬ë¥¼ êµ½íˆê³  ì œ ì´ì•¼ê¸°ì™€ ì˜ê²¬ì— ë³„ íƒˆì—†ì´ ë°›ì•„ë“¤ì—¬ì„œ ë‹¤í–‰ì´ì—ˆìŠµë‹ˆë‹¤. í•™ë¶€ ì´í›„ë¡œ í•œ í”„ë¡œì íŠ¸ë¼ì„œ ìƒê°ë³´ë‹¤ ì–´ë µê³  ë‹¤ì–‘í•œ í•œê³„ë¥¼ ë°›ìœ¼ë©´ì„œ ì„±ì¥ì„ í•˜ê²Œëœ í”„ë¡œì íŠ¸ì˜€ë˜ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë”ë¯¸ ë°ì´í„°ë¥¼ ì´ìš©í•˜ì—¬ ì‹¤ì œì²˜ëŸ¼ êµ¬í˜„í•˜ëŠ”ê²ƒ ê¹Œì§€ í•˜ë©°, ë°ì´í„°ë² ì´ìŠ¤ì˜ ì „ë°˜ì ì¸ êµ¬ì¡°ì™€ ë‹¨ê³„ë¥¼ ì•Œê²Œëœ í”„ë¡œì íŠ¸ì˜€ìŠµë‹ˆë‹¤.
* * *
##### ê¹€ì˜ˆì§€
í›„ê¸° ì‘ì„±
* * *
##### ë°©ì§€í˜
ì²« íŒ€ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ í•™ë¶€ ê³¼ì •ì—ì„œ ìµíŒ ë°ì´í„°ë² ì´ìŠ¤ ì •ê·œí™” ì´ë¡ ì„ ì‹¤ì œ ìŠ¤í‚¤ë§ˆ ì„¤ê³„ì— ì ìš©í•˜ë©° ë‹¤ì‹œ ë³µìŠµí•  ìˆ˜ ìˆì—ˆë˜ ê¸°íšŒì˜€ìŠµë‹ˆë‹¤. íŠ¹íˆ, ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” íŠ¹íˆ ë‹¨ìˆœ ì¿¼ë¦¬ë¥¼ ë„˜ì–´ í”„ë¡œì‹œì ¸ë¥¼ ë„ì…í•˜ëŠ” ê°’ì§„ ê²½í—˜ì„ í–ˆìŠµë‹ˆë‹¤. ì°¨í›„ì—ëŠ” ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œê¹Œì§€ í†µí•© êµ¬í˜„í•˜ëŠ” ì—­ëŸ‰ì„ ê¸°ë¥´ê³  ì‹¶ìŠµë‹ˆë‹¤.
* * *
##### ê¹€ì •ìˆ˜
ì†Œí”„íŠ¸ì›¨ì–´ ê³µí•™ì„ ì²˜ìŒ ì ‘í•´ë³¸ ì…ì¥ì—ì„œ, ìš”êµ¬ë¶„ì„ë¶€í„° ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ê¹Œì§€ ì§ì ‘ ê²½í—˜í•´ ë³¼ ìˆ˜ ìˆëŠ” ëœ»ê¹Šì€ ì‹œê°„ì´ì—ˆìŠµë‹ˆë‹¤. 
í”„ì”¬ ë§ë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹«ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. DMLì´ë¼ëŠ” ìš©ì–´ì¡°ì°¨ ë‚¯ì„¤ê³  ìƒì†Œí–ˆì§€ë§Œ, ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•´ ì§ì ‘ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ê³  ì‹¤í–‰í•˜ë©° ê°ì„ ìµí ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë¬´ì—‡ë³´ë‹¤ ì´ ëª¨ë“  ê³¼ì •ì´ ì²˜ìŒì´ì—ˆë˜ ì €ì—ê²Œ, íŒ€ì›ë“¤ì´ ë§ì€ ë„ì›€ì´ ì£¼ì—ˆìŠµë‹ˆë‹¤. ì €ì˜ ê³ ë¯¼ê³¼ ì–´ë ¤ì›€ì„ í•¨ê»˜ ê³µìœ í•˜ê³  í”¼ë“œë°±ì„ ì£¼ê³ ë°›ìœ¼ë©°, ë•ë¶„ì— ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ëª©ì ê³¼ í•„ìš”ì„±ì„ ëª…í™•í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
* * *
##### ì´ìŠ¬ì´
ë§‰ì—°íˆ ì–´ë µë‹¤ê³ ë§Œ ëŠê¼ˆë˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‹¤ì œë¡œ ì„¤ê³„í•´ ë³´ë‹ˆ ìƒê°ë³´ë‹¤ ì‹ ê²½ ì¨ì•¼ í•  ìš”ì†Œê°€ ë§ë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹«ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. DMLì´ë¼ëŠ” ìš©ì–´ì¡°ì°¨ ë‚¯ì„¤ê³  ìƒì†Œí–ˆì§€ë§Œ, ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•´ ì§ì ‘ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ê³  ì‹¤í–‰í•˜ë©° ê°ì„ ìµí ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë¬´ì—‡ë³´ë‹¤ ì´ ëª¨ë“  ê³¼ì •ì´ ì²˜ìŒì´ì—ˆë˜ ì €ì—ê²Œ, íŒ€ì›ë“¤ì´ ë§ì€ ë„ì›€ì´ ì£¼ì—ˆìŠµë‹ˆë‹¤. ì €ì˜ ê³ ë¯¼ê³¼ ì–´ë ¤ì›€ì„ í•¨ê»˜ ê³µìœ í•˜ê³  í”¼ë“œë°±ì„ ì£¼ê³ ë°›ìœ¼ë©°, ë•ë¶„ì— ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ëª©ì ê³¼ í•„ìš”ì„±ì„ ëª…í™•í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
* * *
##### í˜„ì¬ì§„
ì´ë²ˆ íŒ€ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ì²˜ìŒìœ¼ë¡œ DB ì„¤ê³„ë¥¼ ì§„í–‰í•´ ë³´ì•˜ëŠ”ë° ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ ì‘ì„± ë¶€í„° í…Œì´ë¸” ëª…ì„¸ì„œ, ERD ì„¤ê³„ê¹Œì§€ ì´ì–´ì§€ëŠ” ì²´ê³„ì ì¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ íë¦„ì„ ê²½í—˜í–ˆìŠµë‹ˆë‹¤.
ì‹¤ë¬´ì• ì„œ ì§„í–‰í•˜ëŠ” ë°©ì‹ì²˜ëŸ¼ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¥¼ ì£¼ì œë¡œ ì •í•˜ê³  ê¸°íší•˜ì—¬ DB êµ¬í˜„ê¹Œì§€ í•  ìˆ˜ ìˆì—ˆë‹¤ëŠ” ì ì´ ë§ì€ ë„ì›€ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.
ì§ì ‘ í…Œì´ë¸”ë„ ë§Œë“¤ì–´ ë³´ê³  ì¿¼ë¦¬ë¬¸ë„ ì‘ì„± í•´ë³´ë©° DB ì„¤ê³„ì™€ SQL í™œìš©ì— ëŒ€í•œ ì´í•´ë ¥ì„ ë†’ì¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
* * *
